<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tokens Manager</title>
  <script type="module" crossorigin>
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();class oe{constructor(){this.collections=[],this.variables=[],this.selectedCollectionId=null,this.collapsedGroups=new Set}setData(t,n){this.collections=t,this.variables=n,!this.selectedCollectionId&&t.length&&(this.selectedCollectionId=t[0].id)}getFilteredVariables(){return this.variables.filter(t=>t.collectionId===this.selectedCollectionId)}toggleGroup(t){this.collapsedGroups.has(t)?this.collapsedGroups.delete(t):this.collapsedGroups.add(t)}isGroupCollapsed(t){return this.collapsedGroups.has(t)}}const p=new oe;function u(e){return String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function f(e){parent.postMessage({pluginMessage:e},"*")}function h(e){return document.getElementById(e)}const se={COLOR:'<svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M7.312 6.803a7 7 0 0 1 9.639.248l.28.298a7 7 0 0 1 1.76 4.998l-.029.38C18.807 14.222 17.446 15 16.242 15H13.5l-.101.01a.5.5 0 0 0-.4.49v.5c0 .82-.338 1.603-.92 2.127-.6.542-1.468.8-2.37.488a7 7 0 0 1-2.362-1.385l-.297-.28a7 7 0 0 1 0-9.9zm8.93.955a6 6 0 0 0-8.485 0l-.212.225a6 6 0 0 0 2.492 9.689c.978.337 1.848-.457 1.953-1.467L12 16v-.499a1.5 1.5 0 0 1 1.5-1.5h2.743l.158-.006c.733-.057 1.391-.513 1.543-1.216l.024-.155a6 6 0 0 0-1.484-4.611zM8.5 12.001a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7-2a1 1 0 1 1-.001 2 1 1 0 0 1 0-2m-6-1.5a1 1 0 1 1 0 2.001 1 1 0 0 1 0-2m3.5-1a1 1 0 1 1 0 2 1 1 0 0 1 0-2"></path></svg>',FLOAT:'<svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16 6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zM8 7a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zm3.05 2.002a.5.5 0 0 1 .448.547l-.045.452h1.495l.055-.55a.5.5 0 0 1 .995.098l-.045.452h.547a.5.5 0 1 1 0 1h-.648l-.199 2h.847a.5.5 0 1 1 0 1h-.948l-.054.548a.501.501 0 0 1-.995-.098l.044-.45h-1.495l-.054.548a.501.501 0 0 1-.995-.098l.044-.45H9.5a.5.5 0 0 1 0-1h.647l.2-2H9.5a.5.5 0 0 1 0-1h.948l.055-.55a.5.5 0 0 1 .546-.449m.302 1.999-.199 2h1.494l.2-2z"></path></svg>',STRING:'<svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M8 7h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1M6 8a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2zm3.5 1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0V10h1.5v4H11a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-.5v-4H14v.5a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5z" clip-rule="evenodd"></path></svg>',BOOLEAN:'<svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M10 8h4a4 4 0 0 1 0 8h-4a4 4 0 0 1 0-8m-5 4a5 5 0 0 1 5-5h4a5 5 0 0 1 0 10h-4a5 5 0 0 1-5-5m5 2a2 2 0 1 1 0-4 2 2 0 0 1 0 4m-3-2a3 3 0 1 1 6 0 3 3 0 0 1-6 0" clip-rule="evenodd"></path></svg>'};function ae(e){return se[e]||String(e)}function le(){const e=document.getElementById("collection-select");e&&(e.innerHTML=p.collections.map(t=>`<option value="${t.id}" ${t.id===p.selectedCollectionId?"selected":""}>${u(t.name)}</option>`).join("")||'<option value="">No collections</option>')}function F(){const e=document.getElementById("table-body");if(!e)return;const t=p.getFilteredVariables();if(!t.length){e.innerHTML=`
      <tr class="add-row">
        <td colspan="2">
          <button class="add-row-btn" onclick="window.app.showAddMenu(event)">
            <svg width="12" height="12" viewBox="0 0 16 16"><path d="M8 2v12M2 8h12" stroke="currentColor" stroke-width="2" fill="none"/></svg>
            Add first variable
          </button>
        </td>
      </tr>
    `;return}const n={},o=[];t.forEach(i=>{const c=i.name.split("/");if(c.length>1){const d=c.slice(0,-1).join("/");n[d]||(n[d]=[]),n[d].push({...i,displayName:c[c.length-1]})}else o.push({...i,displayName:i.name})});const s=Object.keys(n).sort();let a="",l=0;o.forEach(i=>{a+=R(i,l++,!1)}),s.forEach(i=>{const c=p.isGroupCollapsed(i),d=n[i].map(r=>r.id).join(",");a+=`
      <tr class="group-row ${c?"collapsed":""}" data-group="${u(i)}">
        <td colspan="2">
          <div class="group-header">
            <span class="group-toggle ${c?"collapsed":""}" onclick="window.app.toggleGroup('${u(i)}')">
              <svg viewBox="0 0 16 16"><path d="M4 6l4 4 4-4" fill="none" stroke="currentColor" stroke-width="2"/></svg>
            </span>
            <span onclick="window.app.toggleGroup('${u(i)}')" style="flex:1;cursor:pointer;">
              ${u(i)}
              <span style="color:var(--text-dim);font-weight:400;font-size:10px;">(${n[i].length})</span>
            </span>
            <button class="row-action danger" onclick="window.app.deleteGroup('${d}')" title="Delete group" style="opacity:0;">
              <svg viewBox="0 0 16 16"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="2"/></svg>
            </button>
          </div>
        </td>
      </tr>
    `,n[i].forEach(r=>{a+=R(r,l++,!0,c,i)})}),e.innerHTML=a}function R(e,t,n,o=!1,s=""){const a=o?"hidden-by-group":"",l=n?"grouped-item":"",i=s?`data-parent-group="${u(s)}"`:"";return`
    <tr data-id="${e.id}" class="${l} ${a}" ${i}>
      <td>
        <div class="name-cell">
          <span class="type-icon ${e.resolvedType}">${ae(e.resolvedType)}</span>
          <input class="cell-input" value="${u(e.displayName)}"
            data-full-name="${u(e.name)}"
            onblur="window.app.updateNameFromDisplay('${e.id}', this.value, '${u(e.name)}')"
            onkeydown="window.app.handleKey(event, ${t}, 'name')">
        </div>
      </td>
      <td>
        ${ie(e)}
      </td>
    </tr>
  `}function ie(e){return e.resolvedType==="COLOR"?`
      <div class="color-value-cell">
        <div class="color-swatch" onclick="window.app.openColorPickerForVariable('${e.id}', '${u(e.value)}')">
          <div class="color-swatch-inner" style="background:${u(e.value)}"></div>
        </div>
        <input class="cell-input mono" value="${u(e.value)}"
          onblur="window.app.updateValue('${e.id}', this.value)">
      </div>
    `:e.resolvedType==="BOOLEAN"?`
      <div class="cell">
        <div class="bool-toggle">
          <button class="${e.value==="true"?"active":""}" onclick="window.app.updateValue('${e.id}', 'true')">True</button>
          <button class="${e.value==="false"?"active":""}" onclick="window.app.updateValue('${e.id}', 'false')">False</button>
        </div>
      </div>
    `:`
    <div class="value-cell">
      <input class="cell-input mono" value="${u(e.value)}"
        onblur="window.app.updateValue('${e.id}', this.value)">
    </div>
  `}function W(e){if(!e)return"#000000";if(e.startsWith("#"))return e;const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return t?"#"+[t[1],t[2],t[3]].map(n=>parseInt(n).toString(16).padStart(2,"0")).join(""):"#000000"}function G(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`rgb(${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)})`:e}function L(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}function x(e){return"#"+[e.r,e.g,e.b].map(t=>Math.round(t).toString(16).padStart(2,"0")).join("")}function J(e,t,n){t/=100,n/=100;const o=Math.floor(e/60)%6,s=e/60-Math.floor(e/60),a=n*(1-t),l=n*(1-s*t),i=n*(1-(1-s)*t);let c,d,r;switch(o){case 0:c=n,d=i,r=a;break;case 1:c=l,d=n,r=a;break;case 2:c=a,d=n,r=i;break;case 3:c=a,d=l,r=n;break;case 4:c=i,d=a,r=n;break;default:c=n,d=a,r=l;break}return{r:Math.round(c*255),g:Math.round(d*255),b:Math.round(r*255)}}function X(e,t,n){e/=255,t/=255,n/=255;const o=Math.max(e,t,n),s=Math.min(e,t,n),a=o-s;let l=0;const i=o===0?0:a/o,c=o;if(a!==0)switch(o){case e:l=((t-n)/a+(t<n?6:0))*60;break;case t:l=((n-e)/a+2)*60;break;case n:l=((e-t)/a+4)*60;break}return{h:l,s:i*100,v:c*100}}function A(e,t){if(t<=50){const n=t/50,o={r:Math.round(255+(e.r-255)*n),g:Math.round(255+(e.g-255)*n),b:Math.round(255+(e.b-255)*n)};return x(o)}else{const n=(t-50)/50,o={r:Math.round(e.r*(1-n)),g:Math.round(e.g*(1-n)),b:Math.round(e.b*(1-n))};return x(o)}}function Y(e,t,n,o){const s=[];for(let a=0;a<o;a++){const l=a/(o-1),i=e+(t-e)*l;s.push(A(n,i))}return s}function ce(e){if(e===5)return["100","300","500","700","900"];if(e===10)return["50","100","200","300","400","500","600","700","800","900"];if(e===11)return["50","100","200","300","400","500","600","700","800","900","950"];const t=[];for(let n=0;n<e;n++){const o=Math.round(50+n/(e-1)*900);t.push(String(o))}return t}let M=null,I=0,B=100,E=100,T=!1,V=!1;function de(){const e=document.getElementById("hue-slider"),t=document.getElementById("sv-panel"),n=document.getElementById("picker-hex-input");e&&(e.onmousedown=o=>{T=!0,N(o)}),t&&(t.onmousedown=o=>{V=!0,q(o)}),document.addEventListener("mousemove",o=>{T&&N(o),V&&q(o)}),document.addEventListener("mouseup",()=>{T=!1,V=!1}),n&&(n.oninput=()=>{let o=n.value.trim();if(o.startsWith("#")||(o="#"+o),/^#[0-9a-fA-F]{6}$/.test(o)){const s=L(o),a=X(s.r,s.g,s.b);I=a.h,B=a.s,E=a.v,H()}})}function N(e){const t=document.getElementById("hue-slider");if(!t)return;const n=t.getBoundingClientRect();let o=(e.clientX-n.left)/n.width;o=Math.max(0,Math.min(1,o)),I=o*360,H()}function q(e){const t=document.getElementById("sv-panel");if(!t)return;const n=t.getBoundingClientRect();let o=(e.clientX-n.left)/n.width,s=(e.clientY-n.top)/n.height;o=Math.max(0,Math.min(1,o)),s=Math.max(0,Math.min(1,s)),B=o*100,E=(1-s)*100,H()}function H(){const e=document.getElementById("sv-panel"),t=document.getElementById("hue-handle"),n=document.getElementById("sv-handle"),o=document.getElementById("picker-hex-input");if(e){const s=`hsl(${I}, 100%, 50%)`;e.style.background=`linear-gradient(to right, #fff, ${s})`}if(t&&(t.style.left=`${I/360*100}%`),n&&(n.style.left=`${B}%`,n.style.top=`${100-E}%`),o){const s=J(I,B,E);o.value=x(s)}}function re(){const e=J(I,B,E);return x(e)}function K(e,t){M=t;const n=e.startsWith("#")?e:W(e),o=L(n),s=X(o.r,o.g,o.b);I=s.h,B=s.s,E=s.v,H();const a=document.getElementById("color-picker-modal");a&&a.classList.add("open")}function U(){const e=document.getElementById("color-picker-modal");e&&e.classList.remove("open"),M=null}function ue(){const e=re();M&&M(e),U()}function pe(){const e=document.getElementById("shades-btn"),t=document.getElementById("shades-modal");e&&(e.onclick=me),t&&(t.onclick=n=>{n.target===t&&P()})}function me(){fe(),he();const e=document.getElementById("shades-modal");e&&e.classList.add("open")}function he(){const e={name:document.getElementById("shades-name"),baseColor:document.getElementById("shades-base-color"),baseHex:document.getElementById("shades-base-hex"),basePreview:document.getElementById("shades-base-preview"),lightValue:document.getElementById("shades-light-value"),darkValue:document.getElementById("shades-dark-value"),count:document.getElementById("shades-count"),options:document.getElementById("shades-options"),generateBtn:document.getElementById("shades-generate-btn"),removeBtn:document.getElementById("shades-remove-btn")};e.name&&(e.name.value=""),e.baseColor&&(e.baseColor.value=""),e.baseHex&&(e.baseHex.value=""),e.basePreview&&(e.basePreview.style.background="transparent"),e.lightValue&&(e.lightValue.value="5"),e.darkValue&&(e.darkValue.value="90"),e.count&&(e.count.value="11"),e.options&&(e.options.style.display="none"),e.generateBtn&&(e.generateBtn.style.display="none"),e.removeBtn&&(e.removeBtn.style.display="none"),Q()}function Q(){const e=document.getElementById("shades-preview"),t=document.getElementById("shades-light-preview"),n=document.getElementById("shades-dark-preview");e&&(e.innerHTML='<div style="color:var(--text-dim);font-size:11px;padding:8px;text-align:center;">Pick a color to preview shades</div>'),t&&(t.style.background="transparent"),n&&(n.style.background="transparent")}function fe(){const e=document.getElementById("shades-source");if(!e)return;const t=p.variables.filter(a=>a.collectionId===p.selectedCollectionId&&a.resolvedType==="COLOR"),n={},o=[];t.forEach(a=>{if(a.name.includes("/")){const l=a.name.split("/")[0];n[l]||(n[l]=[]),n[l].push(a)}else o.push(a)});let s='<option value="">-- Pick a color manually --</option>';o.forEach(a=>{s+=`<option value="single:${a.id}" data-color="${u(a.value)}" data-name="${u(a.name)}" data-type="single">${u(a.name)}</option>`}),Object.keys(n).sort().forEach(a=>{const l=n[a],i=Math.floor(l.length/2),c=l[i],d=l.map(r=>r.id).join(",");s+=`<option value="group:${a}" data-color="${u(c.value)}" data-name="${u(a)}" data-type="group" data-count="${l.length}" data-ids="${d}">${u(a)} (${l.length} shades)</option>`}),e.innerHTML=s}function ge(){const e=document.getElementById("shades-source"),t=document.getElementById("shades-options"),n=document.getElementById("shades-generate-btn"),o=document.getElementById("shades-remove-btn");if(!e||!t||!n||!o)return;const s=e.selectedOptions[0];if(!s||!s.value){t.style.display="none",n.style.display="none",o.style.display="none";return}t.style.display="flex",n.style.display="block";const a=s.dataset.color||"",l=s.dataset.name||"",i=s.dataset.type,c=document.getElementById("shades-name");c&&(c.value=l);const d=W(a),r=document.getElementById("shades-base-color"),g=document.getElementById("shades-base-hex"),w=document.getElementById("shades-base-preview");r&&(r.value=d),g&&(g.value=d),w&&(w.style.background=d);const y=document.getElementById("shades-light-value"),v=document.getElementById("shades-dark-value");if(y&&(y.value="5"),v&&(v.value="90"),i==="group"){const k=parseInt(s.dataset.count||"11"),b=document.getElementById("shades-count");b&&(b.value=String(k)),n.textContent="Update Shades",o.style.display="block"}else n.textContent="Generate",o.style.display="none";O()}function ve(){const e=document.getElementById("shades-base-hex"),t=document.getElementById("shades-base-color"),n=document.getElementById("shades-base-preview");if(!e||!t)return;let o=e.value.trim();o.startsWith("#")||(o="#"+o),/^#[0-9a-fA-F]{6}$/.test(o)&&(t.value=o,n&&(n.style.background=o),O())}function O(){const e=document.getElementById("shades-base-color"),t=e==null?void 0:e.value;if(!t){Q();return}const n=document.getElementById("shades-light-value"),o=document.getElementById("shades-dark-value"),s=document.getElementById("shades-count"),a=parseInt((n==null?void 0:n.value)||"0")||0,l=parseInt((o==null?void 0:o.value)||"100")||100,i=parseInt((s==null?void 0:s.value)||"11"),c=document.getElementById("shades-base-preview"),d=document.getElementById("shades-base-hex");c&&(c.style.background=t),d&&(d.value=t);const r=L(t),g=A(r,a),w=A(r,l),y=document.getElementById("shades-light-preview"),v=document.getElementById("shades-dark-preview");y&&(y.style.background=g),v&&(v.style.background=w);const k=Y(a,l,r,i),b=document.getElementById("shades-preview");b&&(b.innerHTML=k.map(C=>`<div class="shades-preview-item" style="background:${C}" title="${C}"></div>`).join(""))}function P(){const e=document.getElementById("shades-modal");e&&e.classList.remove("open")}function ye(){const e=document.getElementById("shades-name"),t=document.getElementById("shades-base-color"),n=e==null?void 0:e.value.trim(),o=t==null?void 0:t.value;if(!o){alert("Please pick a base color");return}if(!n){alert("Please enter a group name");return}const s=document.getElementById("shades-source"),a=s==null?void 0:s.selectedOptions[0],l=a&&a.dataset.type==="group",i=a&&a.dataset.type==="single";let c=[];l&&a.dataset.ids?c=a.dataset.ids.split(","):i&&a.value&&(c=[a.value.replace("single:","")]);const d=document.getElementById("shades-light-value"),r=document.getElementById("shades-dark-value"),g=document.getElementById("shades-count"),w=parseInt((d==null?void 0:d.value)||"0")||0,y=parseInt((r==null?void 0:r.value)||"100")||100,v=parseInt((g==null?void 0:g.value)||"11"),k=L(o),b=Y(w,y,k,v),C=ce(v),z=b.map((D,ne)=>({name:`${n}/${C[ne]}`,value:G(D)}));c.length>0?f({type:"update-shades",collectionId:p.selectedCollectionId,deleteIds:c,shades:z}):f({type:"create-shades",collectionId:p.selectedCollectionId,shades:z}),P()}function be(){var l;const e=document.getElementById("shades-source"),t=e==null?void 0:e.selectedOptions[0];if(!t||t.dataset.type!=="group")return;const n=t.dataset.name,o=((l=t.dataset.ids)==null?void 0:l.split(","))||[],s=document.getElementById("shades-base-color"),a=s==null?void 0:s.value;confirm(`Convert "${n}" shades back to a single color?`)&&(f({type:"remove-shades",collectionId:p.selectedCollectionId,deleteIds:o,newColor:{name:n,value:G(a)}}),P())}function Ie(){const e=document.getElementById("shades-base-color"),t=(e==null?void 0:e.value)||"#000000";K(t,n=>{const o=document.getElementById("shades-base-color"),s=document.getElementById("shades-base-hex"),a=document.getElementById("shades-base-preview");o&&(o.value=n),s&&(s.value=n),a&&(a.style.background=n),O()})}let S=null;function we(){const e=document.getElementById("input-modal"),t=document.getElementById("input-modal-input"),n=document.getElementById("input-modal-confirm");n&&(n.onclick=()=>{const o=t==null?void 0:t.value.trim();o&&S&&S(o),$()}),t&&(t.onkeydown=o=>{o.key==="Enter"?n==null||n.click():o.key==="Escape"&&$()}),e&&(e.onclick=o=>{o.target===e&&$()})}function Z(e,t,n,o){const s=document.getElementById("input-modal-title"),a=document.getElementById("input-modal-label"),l=document.getElementById("input-modal-confirm"),i=document.getElementById("input-modal-input"),c=document.getElementById("input-modal");s&&(s.textContent=e),a&&(a.textContent=t),l&&(l.textContent=n),i&&(i.value=""),S=o,c&&c.classList.add("open"),setTimeout(()=>i==null?void 0:i.focus(),50)}function $(){const e=document.getElementById("input-modal");e&&e.classList.remove("open"),S=null}function Be(){de(),pe(),we(),Ee(),ke(),xe(),Ce(),$e(),window.app={showAddMenu:_,toggleGroup:Me,deleteGroup:Se,updateNameFromDisplay:Le,updateValue:te,handleKey:He,openColorPickerForVariable:Oe,selectSourceColor:ge,updateBaseFromHex:ve,updateShadesPreview:O,closeShadesModal:P,generateShades:ye,removeShades:be,openShadesColorPicker:Ie,closeColorPicker:U,confirmColorPicker:ue,closeInputModal:$}}function Ee(){document.querySelectorAll(".tab").forEach(e=>{e.onclick=()=>{var n;document.querySelectorAll(".tab").forEach(o=>o.classList.remove("active")),document.querySelectorAll(".tab-content").forEach(o=>o.classList.remove("active")),e.classList.add("active");const t=e.dataset.tab+"-tab";(n=h(`${t}`))==null||n.classList.add("active"),e.dataset.tab==="json"&&ee()}})}function ke(){const e=h("refresh-btn"),t=h("add-collection-btn");e&&(e.onclick=()=>f({type:"refresh"})),t&&(t.onclick=()=>{Z("New Collection","Collection name","Create",n=>{f({type:"create-collection",name:n})})})}function Ce(){const e=h("collection-select");e&&(e.onchange=()=>{p.selectedCollectionId=e.value,F()})}const m=h("add-menu");function $e(){const e=h("add-variable-btn");e&&(e.onclick=_),document.addEventListener("click",t=>{const n=t.target;!n.closest("#add-menu")&&!n.closest("#add-variable-btn")&&!n.closest(".add-row-btn")&&(m==null||m.classList.remove("open"))}),m==null||m.querySelectorAll("button").forEach(t=>{t.onclick=()=>{const n=t.dataset.type;m==null||m.classList.remove("open"),Z("New Variable","Variable name","Create",o=>{let s="";n==="COLOR"?s="rgb(0, 0, 0)":n==="FLOAT"?s="0":n==="BOOLEAN"&&(s="true"),f({type:"create-variable",collectionId:p.selectedCollectionId,name:o,varType:n,value:s})})}})}function _(e){const n=e.target.getBoundingClientRect();m&&(m.style.top=n.bottom+4+"px",m.style.left=n.left+"px",m.classList.add("open"))}function xe(){const e=h("resize-handle");let t=!1,n,o,s,a;e&&(e.onmousedown=l=>{t=!0,n=l.clientX,o=l.clientY,s=window.innerWidth,a=window.innerHeight,l.preventDefault()}),document.onmousemove=l=>{if(!t)return;const i=Math.max(400,s+(l.clientX-n)),c=Math.max(300,a+(l.clientY-o));f({type:"resize",width:i,height:c})},document.onmouseup=()=>{t=!1}}function ee(){const e=h("json-editor");e&&(e.value=JSON.stringify({collections:p.collections,variables:p.variables.map(t=>({id:t.id,collectionId:t.collectionId,name:t.name,type:t.resolvedType,value:t.value}))},null,2))}function Me(e){p.toggleGroup(e),F()}function Se(e){const t=e.split(",");confirm(`Delete all ${t.length} variables in this group?`)&&f({type:"delete-group",ids:t})}function Le(e,t,n){const o=n.split("/");let s;o.length>1?(o[o.length-1]=t,s=o.join("/")):s=t,s!==n&&f({type:"update-variable-name",id:e,name:s})}function te(e,t){f({type:"update-variable-value",id:e,value:t})}function He(e,t,n){var a;const o=h("table-body");if(!o)return;const s=o.querySelectorAll("tr:not(.add-row):not(.group-row)");if(e.key==="Tab")if(e.preventDefault(),n==="name"){const l=(a=s[t])==null?void 0:a.querySelector("td:last-child input");l&&l.focus()}else{const l=s[t+1];if(l){const i=l.querySelector(".name-cell input");i&&i.focus()}}else e.key==="Enter"&&e.target.blur()}function Oe(e,t){K(t,n=>{te(e,G(n))})}function j(e,t){const n=h("status");n&&(n.textContent=e,n.className="status "+t,t==="success"&&setTimeout(()=>{n.textContent="",n.className="status"},2e3))}window.onmessage=e=>{const t=e.data.pluginMessage;t&&(t.type==="data-loaded"&&(p.setData(t.collections||[],t.variables||[]),le(),F(),ee()),t.type==="update-success"&&j("Saved","success"),t.type==="update-error"&&j("Error: "+t.error,"warning"),t.type==="changes-detected"&&j("Changes detected - click Refresh","warning"))};document.addEventListener("DOMContentLoaded",()=>{Be();const e=h("json-format-btn"),t=h("json-update-btn"),n=h("json-editor");e&&n&&(e.onclick=()=>{try{n.value=JSON.stringify(JSON.parse(n.value),null,2),n.classList.remove("error")}catch{n.classList.add("error")}}),t&&n&&(t.onclick=()=>{try{f({type:"update-from-json",data:JSON.parse(n.value)}),n.classList.remove("error")}catch{n.classList.add("error")}})});

</script>
  <style>
:root{--bg: #ffffff;--bg-alt: #f9f9f9;--bg-hover: #f0f0f0;--bg-selected: #e8f4ff;--border: #e0e0e0;--text: #1e1e1e;--text-dim: #666;--accent: #18a0fb;--danger: #e03e3e;--success: #1bc47d}*{box-sizing:border-box;margin:0;padding:0}body{font-family:Inter,-apple-system,sans-serif;font-size:12px;background:var(--bg);color:var(--text);height:100vh;display:flex;flex-direction:column;overflow:hidden}.spacer{flex:1}.toolbar{display:flex;align-items:center;gap:8px;padding:8px 12px;border-bottom:1px solid var(--border);background:var(--bg-alt)}.toolbar-group{display:flex;align-items:center;gap:4px}.toolbar-divider{width:1px;height:20px;background:var(--border);margin:0 8px}.btn{display:flex;align-items:center;gap:4px;padding:6px 10px;border:1px solid var(--border);border-radius:4px;background:var(--bg);font-size:11px;cursor:pointer;color:var(--text)}.btn:hover{background:var(--bg-hover)}.btn-icon{padding:6px}.btn svg{width:14px;height:14px}.btn-primary{background:var(--accent);border-color:var(--accent);color:#fff}.btn-primary:hover{background:#0d8de5}.btn-danger{background:var(--danger);border-color:var(--danger);color:#fff}.btn-danger:hover{background:#c43030}.collection-select{padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-size:11px;min-width:140px}.status{font-size:10px;padding:4px 8px;border-radius:4px}.status.success{background:#e6f9f0;color:var(--success)}.status.warning{background:#fff8e6;color:#b86e00}.tabs{display:flex;background:var(--bg-alt);border-bottom:1px solid var(--border)}.tab{padding:8px 16px;border:none;background:none;font-size:11px;font-weight:500;color:var(--text-dim);cursor:pointer;border-bottom:2px solid transparent}.tab:hover{color:var(--text)}.tab.active{color:var(--accent);border-bottom-color:var(--accent)}.tab-content{display:none;flex:1;flex-direction:column;overflow:hidden}.tab-content.active{display:flex}.json-panel{flex:1;display:flex;flex-direction:column;padding:12px;gap:8px}.json-editor{flex:1;border:1px solid var(--border);border-radius:4px;padding:12px;font-family:SF Mono,Monaco,monospace;font-size:11px;resize:none;outline:none}.json-editor:focus{border-color:var(--accent)}.json-editor.error{border-color:var(--danger);background:#fff5f5}.table-container{flex:1;overflow:auto}.spreadsheet{width:100%;border-collapse:collapse;table-layout:fixed}.spreadsheet th,.spreadsheet td{border:1px solid var(--border);padding:0;height:32px;text-align:left;vertical-align:middle}.spreadsheet th{background:var(--bg-alt);font-weight:600;font-size:10px;text-transform:uppercase;color:var(--text-dim);padding:0 10px;position:sticky;top:0;z-index:10}.spreadsheet th.col-name{width:40%;padding-left:42px}.spreadsheet th.col-value{padding-left:10px}.spreadsheet tbody tr:hover{background:var(--bg-hover)}.spreadsheet tbody tr.selected{background:var(--bg-selected)}.group-row td{background:var(--bg-alt);border-bottom:1px solid var(--border)}.group-row:hover td{background:var(--bg-hover)}.group-row:hover .row-action{opacity:1!important}.group-row.collapsed+tr:not(.group-row),.group-row.collapsed~tr:not(.group-row){display:none}.group-header{display:flex;align-items:center;gap:6px;padding:0 10px;font-weight:600;font-size:11px;color:var(--text);cursor:pointer;-webkit-user-select:none;user-select:none}.group-toggle{width:16px;height:16px;display:flex;align-items:center;justify-content:center;color:var(--text-dim);transition:transform .15s}.group-toggle.collapsed{transform:rotate(-90deg)}.group-toggle svg{width:10px;height:10px}tr.grouped-item .cell-input:first-of-type{padding-left:26px}tr.hidden-by-group{display:none}.add-row td{background:transparent;border:1px dashed var(--border)}.add-row:hover td{background:var(--bg-hover)}.add-row-btn{width:100%;height:32px;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;color:var(--text-dim);font-size:11px}.add-row-btn:hover{color:var(--accent)}.row-actions{display:flex;align-items:center;justify-content:center;gap:2px;opacity:0;transition:opacity .1s}tr:hover .row-actions{opacity:1}.row-action{width:22px;height:22px;border:none;background:none;border-radius:3px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--text-dim)}.row-action:hover{background:var(--bg-hover);color:var(--text)}.row-action.danger:hover{background:#ffe5e5;color:var(--danger)}.row-action svg{width:12px;height:12px}.empty-state{padding:60px 20px;text-align:center;color:var(--text-dim)}.cell{padding:0 10px;height:100%;display:flex;align-items:center}.cell-input{width:100%;height:100%;border:none;background:transparent;font-size:12px;font-family:inherit;padding:0 10px;outline:none}.cell-input:focus{background:#fff;box-shadow:inset 0 0 0 2px var(--accent)}.cell-input.mono{font-family:SF Mono,Monaco,monospace;font-size:11px}.name-cell{display:flex;align-items:center;gap:8px;height:100%;padding-left:10px}.name-cell .cell-input{flex:1}.color-value-cell{display:flex;align-items:center;gap:8px;height:100%;padding-left:10px}.color-value-cell .cell-input{flex:1}.value-cell{display:flex;align-items:center;height:100%;padding-left:10px}.value-cell .cell-input{flex:1}.type-icon{width:24px;height:24px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.type-icon svg{width:24px;height:24px}.type-icon.COLOR svg{color:#c41e3a}.type-icon.FLOAT svg{color:#3a5bc4}.type-icon.STRING svg{color:#2e8b57}.type-icon.BOOLEAN svg{color:#c47a1e}.color-swatch{width:24px;height:24px;border-radius:4px;border:1px solid var(--border);cursor:pointer;position:relative;overflow:hidden}.color-swatch:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(45deg,#ddd 25%,transparent 25%),linear-gradient(-45deg,#ddd 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ddd 75%),linear-gradient(-45deg,transparent 75%,#ddd 75%);background-size:6px 6px;background-position:0 0,0 3px,3px -3px,-3px 0px}.color-swatch-inner{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1}.color-swatch input{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;cursor:pointer}.bool-toggle{display:flex;border:1px solid var(--border);border-radius:4px;overflow:hidden}.bool-toggle button{padding:4px 12px;border:none;background:var(--bg);font-size:10px;cursor:pointer}.bool-toggle button:first-child{border-right:1px solid var(--border)}.bool-toggle button.active{background:var(--accent);color:#fff}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#00000080;display:none;align-items:center;justify-content:center;z-index:200}.modal-overlay.open{display:flex}.modal{background:var(--bg);border-radius:8px;box-shadow:0 8px 32px #0003;width:360px;max-height:90vh;overflow:auto}.modal-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border)}.modal-header h3{font-size:13px;font-weight:600}.modal-close{width:24px;height:24px;border:none;background:none;cursor:pointer;border-radius:4px;display:flex;align-items:center;justify-content:center;color:var(--text-dim)}.modal-close:hover{background:var(--bg-hover);color:var(--text)}.modal-body{padding:16px;display:flex;flex-direction:column;gap:16px}.modal-footer{display:flex;justify-content:flex-end;gap:8px;padding:12px 16px;border-top:1px solid var(--border)}.form-group{display:flex;flex-direction:column;gap:6px}.form-group label{font-size:11px;font-weight:500;color:var(--text-dim)}.form-input{padding:8px 10px;border:1px solid var(--border);border-radius:4px;font-size:12px;outline:none}.form-input:focus{border-color:var(--accent)}.form-row{display:flex;gap:12px}.form-row .form-group{flex:1}.color-input-wrapper{display:flex;align-items:center;gap:8px}.color-input-wrapper .form-input{flex:1}.color-input-preview{width:32px;height:32px;border-radius:4px;border:1px solid var(--border);cursor:pointer;position:relative;overflow:hidden;flex-shrink:0}.color-input-preview:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(45deg,#ddd 25%,transparent 25%),linear-gradient(-45deg,#ddd 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ddd 75%),linear-gradient(-45deg,transparent 75%,#ddd 75%);background-size:6px 6px;background-position:0 0,0 3px,3px -3px,-3px 0px}.color-input-preview .color-fill{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1}.color-input-preview input{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;cursor:pointer}.lightness-input-wrapper{display:flex;align-items:center;gap:8px}.lightness-input-wrapper .form-input{width:70px;text-align:center}.lightness-preview{width:32px;height:32px;border-radius:4px;border:1px solid var(--border);flex-shrink:0}.shades-preview{display:flex;border-radius:4px;overflow:hidden;height:32px;border:1px solid var(--border)}.shades-preview-item{flex:1;height:100%}.color-picker-container{display:flex;flex-direction:column;gap:16px}.picker-sv-panel{width:100%;height:180px;border-radius:8px;position:relative;cursor:crosshair;background:linear-gradient(to right,#fff,red)}.picker-sv-panel:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(to bottom,transparent,#000);border-radius:8px;pointer-events:none}.picker-sv-handle{position:absolute;width:18px;height:18px;border:3px solid white;border-radius:50%;box-shadow:0 0 0 1px #0003,inset 0 0 0 1px #0003;transform:translate(-50%,-50%);pointer-events:none;z-index:2;background:transparent}.picker-hue-slider{width:100%;height:16px;border-radius:8px;background:linear-gradient(to right,red,#ff0,#0f0,#0ff,#00f,#f0f,red);position:relative;cursor:pointer}.picker-hue-handle{position:absolute;top:50%;width:20px;height:20px;background:transparent;border:3px solid white;border-radius:50%;box-shadow:0 0 0 1px #0003,inset 0 0 0 1px #0003;transform:translate(-50%,-50%);pointer-events:none}.color-picker-inputs{display:flex;gap:8px;align-items:center}.color-picker-inputs .form-input{width:100%;box-sizing:border-box;text-align:center;font-family:SF Mono,Monaco,monospace;font-size:11px;border-radius:8px}.add-menu{position:absolute;background:#fff;border:1px solid var(--border);border-radius:6px;box-shadow:0 4px 12px #00000026;padding:4px;z-index:100;display:none}.add-menu.open{display:block}.add-menu button{display:flex;align-items:center;gap:8px;width:100%;padding:8px 12px;border:none;background:none;text-align:left;font-size:12px;cursor:pointer;border-radius:4px}.add-menu button svg{flex-shrink:0}.add-menu button[data-type=COLOR] svg{color:#c41e3a}.add-menu button[data-type=FLOAT] svg{color:#3a5bc4}.add-menu button[data-type=STRING] svg{color:#2e8b57}.add-menu button[data-type=BOOLEAN] svg{color:#c47a1e}.add-menu button:hover{background:var(--bg-hover)}.resize-handle{position:fixed;bottom:0;right:0;width:16px;height:16px;cursor:nwse-resize;z-index:1000}.resize-handle:before{content:"";position:absolute;bottom:3px;right:3px;width:8px;height:8px;border-right:2px solid var(--border);border-bottom:2px solid var(--border)}.resize-handle:hover:before{border-color:var(--text-dim)}

</style>
</head>
<body>
  <div class="tabs">
    <button class="tab active" data-tab="table">Table</button>
    <button class="tab" data-tab="json">JSON</button>
  </div>

  <!-- Table Tab -->
  <div id="table-tab" class="tab-content active">
    <div class="toolbar">
      <div class="toolbar-group">
        <select id="collection-select" class="collection-select"></select>
        <button id="add-collection-btn" class="btn btn-icon" title="New Collection">
          <svg viewBox="0 0 16 16"><path d="M8 2v12M2 8h12" stroke="currentColor" stroke-width="2" fill="none"/></svg>
        </button>
      </div>

      <div class="toolbar-divider"></div>

      <div class="toolbar-group">
        <button id="add-variable-btn" class="btn btn-primary">
          <svg viewBox="0 0 16 16"><path d="M8 2v12M2 8h12" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          Add Variable
        </button>
        <button id="shades-btn" class="btn" title="Generate Color Shades">
          <svg viewBox="0 0 16 16" width="14" height="14"><rect x="1" y="2" width="3" height="12" rx="1" fill="currentColor" opacity="0.2"/><rect x="5" y="2" width="3" height="12" rx="1" fill="currentColor" opacity="0.5"/><rect x="9" y="2" width="3" height="12" rx="1" fill="currentColor" opacity="0.8"/><rect x="13" y="2" width="2" height="12" rx="1" fill="currentColor"/></svg>
          Shades
        </button>
      </div>

      <div class="spacer"></div>

      <span id="status" class="status"></span>

      <button id="refresh-btn" class="btn btn-icon" title="Refresh">
        <svg viewBox="0 0 16 16"><path d="M13.65 2.35A8 8 0 1 0 16 8h-2a6 6 0 1 1-1.76-4.24L10 6h6V0l-2.35 2.35z" fill="currentColor"/></svg>
      </button>
    </div>

    <div class="table-container">
      <table class="spreadsheet">
        <thead>
          <tr>
            <th class="col-name">Name</th>
            <th class="col-value">Value</th>
          </tr>
        </thead>
        <tbody id="table-body"></tbody>
      </table>
    </div>

    <!-- Add Menu -->
    <div id="add-menu" class="add-menu">
      <button data-type="COLOR"><svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M7.312 6.803a7 7 0 0 1 9.639.248l.28.298a7 7 0 0 1 1.76 4.998l-.029.38C18.807 14.222 17.446 15 16.242 15H13.5l-.101.01a.5.5 0 0 0-.4.49v.5c0 .82-.338 1.603-.92 2.127-.6.542-1.468.8-2.37.488a7 7 0 0 1-2.362-1.385l-.297-.28a7 7 0 0 1 0-9.9zm8.93.955a6 6 0 0 0-8.485 0l-.212.225a6 6 0 0 0 2.492 9.689c.978.337 1.848-.457 1.953-1.467L12 16v-.499a1.5 1.5 0 0 1 1.5-1.5h2.743l.158-.006c.733-.057 1.391-.513 1.543-1.216l.024-.155a6 6 0 0 0-1.484-4.611zM8.5 12.001a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7-2a1 1 0 1 1-.001 2 1 1 0 0 1 0-2m-6-1.5a1 1 0 1 1 0 2.001 1 1 0 0 1 0-2m3.5-1a1 1 0 1 1 0 2 1 1 0 0 1 0-2"></path></svg>Color</button>
      <button data-type="FLOAT"><svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16 6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zM8 7a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zm3.05 2.002a.5.5 0 0 1 .448.547l-.045.452h1.495l.055-.55a.5.5 0 0 1 .995.098l-.045.452h.547a.5.5 0 1 1 0 1h-.648l-.199 2h.847a.5.5 0 1 1 0 1h-.948l-.054.548a.501.501 0 0 1-.995-.098l.044-.45h-1.495l-.054.548a.501.501 0 0 1-.995-.098l.044-.45H9.5a.5.5 0 0 1 0-1h.647l.2-2H9.5a.5.5 0 0 1 0-1h.948l.055-.55a.5.5 0 0 1 .546-.449m.302 1.999-.199 2h1.494l.2-2z"></path></svg>Number</button>
      <button data-type="STRING"><svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M8 7h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1M6 8a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2zm3.5 1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0V10h1.5v4H11a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-.5v-4H14v.5a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5z" clip-rule="evenodd"></path></svg>String</button>
      <button data-type="BOOLEAN"><svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M10 8h4a4 4 0 0 1 0 8h-4a4 4 0 0 1 0-8m-5 4a5 5 0 0 1 5-5h4a5 5 0 0 1 0 10h-4a5 5 0 0 1-5-5m5 2a2 2 0 1 1 0-4 2 2 0 0 1 0 4m-3-2a3 3 0 1 1 6 0 3 3 0 0 1-6 0" clip-rule="evenodd"></path></svg>Boolean</button>
    </div>
  </div>

  <!-- JSON Tab -->
  <div id="json-tab" class="tab-content">
    <div class="json-panel">
      <textarea id="json-editor" class="json-editor" spellcheck="false"></textarea>
      <div style="display:flex;gap:8px;">
        <button id="json-update-btn" class="btn btn-primary">Update</button>
        <button id="json-format-btn" class="btn">Format</button>
      </div>
    </div>
  </div>

  <!-- Shades Generator Modal -->
  <div id="shades-modal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h3>Generate Color Shades</h3>
        <button class="modal-close" onclick="window.app.closeShadesModal()">
          <svg width="12" height="12" viewBox="0 0 16 16"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="2"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Select Color</label>
          <select id="shades-source" class="form-input" onchange="window.app.selectSourceColor()">
            <option value="">-- Select a color --</option>
          </select>
        </div>

        <div id="shades-options" style="display:none;flex-direction:column;gap:16px;">
          <div class="form-group">
            <label>Group Name</label>
            <input type="text" id="shades-name" class="form-input" placeholder="e.g. blue, primary, brand" value="">
          </div>

          <div class="form-group">
            <label>Base Color</label>
            <div class="color-input-wrapper">
              <div class="color-input-preview" onclick="window.app.openShadesColorPicker()" style="cursor:pointer;">
                <div class="color-fill" id="shades-base-preview" style="background: transparent"></div>
              </div>
              <input type="hidden" id="shades-base-color" value="">
              <input type="text" id="shades-base-hex" class="form-input mono" value="" placeholder="#000000" oninput="window.app.updateBaseFromHex()">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Lightest</label>
              <div class="lightness-input-wrapper">
                <input type="number" id="shades-light-value" class="form-input" value="5" min="0" max="100" oninput="window.app.updateShadesPreview()">
                <div class="lightness-preview" id="shades-light-preview"></div>
              </div>
            </div>
            <div class="form-group">
              <label>Darkest</label>
              <div class="lightness-input-wrapper">
                <input type="number" id="shades-dark-value" class="form-input" value="90" min="0" max="100" oninput="window.app.updateShadesPreview()">
                <div class="lightness-preview" id="shades-dark-preview"></div>
              </div>
            </div>
            <div class="form-group">
              <label>Shades</label>
              <input type="number" id="shades-count" class="form-input" value="11" min="2" max="20" oninput="window.app.updateShadesPreview()" style="width:60px;">
            </div>
          </div>

          <div class="form-group">
            <label>Preview</label>
            <div class="shades-preview" id="shades-preview"></div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="shades-remove-btn" class="btn btn-danger" onclick="window.app.removeShades()" style="display:none;">Remove Shades</button>
        <div class="spacer"></div>
        <button class="btn" onclick="window.app.closeShadesModal()">Cancel</button>
        <button id="shades-generate-btn" class="btn btn-primary" onclick="window.app.generateShades()">Generate</button>
      </div>
    </div>
  </div>

  <!-- Input Modal -->
  <div id="input-modal" class="modal-overlay">
    <div class="modal" style="width: 300px;">
      <div class="modal-header">
        <h3 id="input-modal-title">Enter Name</h3>
        <button class="modal-close" onclick="window.app.closeInputModal()">
          <svg width="12" height="12" viewBox="0 0 16 16"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="2"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label id="input-modal-label">Name</label>
          <input type="text" id="input-modal-input" class="form-input" placeholder="Enter name...">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" onclick="window.app.closeInputModal()">Cancel</button>
        <button id="input-modal-confirm" class="btn btn-primary">Create</button>
      </div>
    </div>
  </div>

  <!-- Color Picker Modal -->
  <div id="color-picker-modal" class="modal-overlay">
    <div class="modal" style="width: 300px;">
      <div class="modal-header">
        <h3>Pick Color</h3>
        <button class="modal-close" onclick="window.app.closeColorPicker()">
          <svg width="12" height="12" viewBox="0 0 16 16"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="2"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="color-picker-container">
          <div id="sv-panel" class="picker-sv-panel">
            <div id="sv-handle" class="picker-sv-handle"></div>
          </div>
          <div id="hue-slider" class="picker-hue-slider">
            <div id="hue-handle" class="picker-hue-handle"></div>
          </div>
          <div class="color-picker-inputs">
            <input type="text" id="picker-hex-input" class="form-input" placeholder="#000000">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn" onclick="window.app.closeColorPicker()">Cancel</button>
        <button class="btn btn-primary" onclick="window.app.confirmColorPicker()">Apply</button>
      </div>
    </div>
  </div>

  <!-- Resize Handle -->
  <div class="resize-handle" id="resize-handle"></div>

</body>
</html>
